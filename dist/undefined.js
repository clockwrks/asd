var o=require("enmity"),l=require("enmity/api/storage"),h=require("react");function d(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var a=d(h);const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl,e.ScrollView,e.SectionList,e.StatusBar,e.StyleSheet,e.Switch,e.Text,e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable,e.View,e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox;const m=e.FormDivider;e.FormHint,e.FormIcon;const p=e.FormInput;e.FormLabel,e.FormRadio,e.FormRow;const F=e.FormSection;e.FormSelect,e.FormSubLabel;const b=e.FormSwitch;e.FormTernaryCheckBox;const f=e.FormText;e.FormTextColors,e.FormTextSizes;const g={active:!1,targetUserId:""},u=o.webpack.findByProps("getMember","getMembers"),y=o.webpack.findByProps("getUser","getCurrentUser");class S extends o.Plugin{constructor(){super(...arguments),this.settings=g}async onStart(){this.settings=await l.storage.get(this.manifest.name,"settings")||g,this.settings.active&&this.settings.targetUserId&&this.applyPatch()}onStop(){o.patcher.unpatchAll()}applyPatch(){const r=y.getCurrentUser().id;o.patcher.after(u,"getMember",(i,s,t)=>{if(t&&s&&s[1]===r){const c=u.getMember(s[0],this.settings.targetUserId);c&&Object.assign(t,{nick:c.nick})}})}getSettingsPanel(){const[r,i]=a.default.useState(this.settings),s=async t=>{this.settings=t,await l.storage.set(this.manifest.name,"settings",t),o.patcher.unpatchAll(),t.active&&t.targetUserId&&this.applyPatch(),i(t)};return a.default.createElement(F,{title:"NameChanger Settings"},a.default.createElement(b,{note:"Enable or disable the plugin.",value:r.active,onChange:t=>s({...r,active:t})},"Enabled"),a.default.createElement(m,null),a.default.createElement(p,{placeholder:"Enter a user ID",label:"Target User ID",note:"Your display name will change to this user's display name.",value:r.targetUserId,onChange:t=>i({...r,targetUserId:t}),onBlur:()=>s(r)}),a.default.createElement(m,null),a.default.createElement(f,null,'After setting the User ID, toggle the "Enabled" switch to apply the changes. You may need to restart Discord for some changes to take effect.'))}}module.exports=S;
